<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<!-- Mirrored from docs.garagegames.com/tgea/official/content/documentation/Engine Reference/a02837.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Dec 2017 21:39:54 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<HEAD><SCRIPT SRC="../../include/tutorial.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/prototype.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/scriptaculous.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/glossaryLookUp.html" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/referenceLookUp.html" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/component.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/componentContainer.html" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT>DocImagePath = "../../index.html";</SCRIPT><link href="../../include/tutorialStyles.css" rel="stylesheet" type="text/css" />
<link href="../../include/tutorial.css" rel="stylesheet" type="text/css" />
<link href="../../include/globalMainPageStyles.css" rel="stylesheet" type="text/css" />
<link href="../../include/referenceThemeStyle.html" rel="stylesheet" type="text/css" />
<link href="../../include/docTheme/theme.css" rel="stylesheet" type="text/css" />
<script>
   // this script chunk is to update the ToC to the current doc and expand it
   pageID = 1750;
   parent.leftFrame.expandToItem('tree2', 'doc1750');
   var element = parent.leftFrame.document.getElementById('doc1750');
   if((element) && (element.className==parent.leftFrame.nodeClosedClass))
{
   element.className = parent.leftFrame.nodeOpenClass
}
;
</script><SCRIPT SRC="../../include/tutorial.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/prototype.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/scriptaculous.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/glossaryLookUp.html" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/referenceLookUp.html" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/component.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/componentContainer.html" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT>DocImagePath = "../../index.html";</SCRIPT><link href="../../include/tutorialStyles.css" rel="stylesheet" type="text/css" />
<link href="../../include/tutorial.css" rel="stylesheet" type="text/css" />
<link href="../../include/globalMainPageStyles.css" rel="stylesheet" type="text/css" />
<link href="../../include/referenceThemeStyle.html" rel="stylesheet" type="text/css" />
<link href="../../include/docTheme/theme.css" rel="stylesheet" type="text/css" />
<script>
   // this script chunk is to update the ToC to the current doc and expand it
   pageID = 1750;
   parent.leftFrame.expandToItem('tree2', 'doc1750');
   var element = parent.leftFrame.document.getElementById('doc1750');
   if((element) && (element.className==parent.leftFrame.nodeClosedClass))
{
   element.className = parent.leftFrame.nodeOpenClass
}
;
</script><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>TGEA: DataChunker Class Reference</title>
<link href="torque.css" rel="stylesheet" type="text/css">
</head>
<BODY id = "BODYID" onLoad = "initComponent()"  id = "BODYID" onLoad = "initComponent()"  bgcolor="#ffffff" text="#000000" link="#333399" alink="#9999ff" vlink="#000066">
<div align="center">

<table width=700 cellspacing=0 cellpadding=10 border=0 bgcolor="#ffffff" summary="">
<tr><td>


<!-- Generated by Doxygen 1.4.7 -->
<h1><a name = "HeaderLink0"></a><a name = "HeaderLink0"></a>DataChunker Class Reference</h1><!-- doxytag: class="DataChunker" --><code>#include &lt;dataChunker.h&gt;</code>
<p>
Inheritance diagram for DataChunker:<p><center><img src="a05176.png" border="0" usemap="#a05177" alt="Inheritance graph"></center>
<map name="a05177">
<area href="a02764.html" shape="rect" coords="169,101,268,128" alt="">
<area href="a02764.html" shape="rect" coords="596,28,732,55" alt="">
<area href="a02764.html" shape="rect" coords="531,100,797,127" alt="">
<area href="a02764.html" shape="rect" coords="533,193,795,220" alt="">
<area href="a02767.html" shape="rect" coords="152,279,285,305" alt="">
<area href="a03464.html" shape="rect" coords="153,329,284,356" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="a00241.html">List of all members.</a><hr><a name="_details"></a><h2><a name = "HeaderLink1"></a><a name = "HeaderLink1"></a>Detailed Description</h2>
Implements a chunked data allocator. 
<p>
Calling new/malloc all the time is a time consuming operation. Therefore, we provide the <a class="el" href="a02837.html">DataChunker</a>, which allocates memory in blocks of chunkSize (by default 16k, see ChunkSize, though it can be set in the constructor), then doles it out as requested, in chunks of up to chunkSize in size.<p>
It will assert if you try to get more than ChunkSize bytes at a time, and it deals with the logic of allocating new blocks and giving out word-aligned chunks.<p>
Note that new/free/realloc WILL NOT WORK on memory gotten from the <a class="el" href="a02837.html">DataChunker</a>. This also only grows (you can call freeBlocks to deallocate and reset things). 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2><a name = "HeaderLink2"></a><a name = "HeaderLink2"></a>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02837.html#b91c82c9e291d5d2316773f678890b9d536630bb06ed00f89cfb97eadca9c7c4">ChunkSize</a> = 16376</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default size of each <a class="el" href="a02838.html">DataBlock</a> page in the <a class="el" href="a02837.html">DataChunker</a>.  <a href="#b91c82c9e291d5d2316773f678890b9d536630bb06ed00f89cfb97eadca9c7c4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="a02837.html#b91c82c9e291d5d2316773f678890b9d536630bb06ed00f89cfb97eadca9c7c4">ChunkSize</a> =  16376
 }</td></tr>

<tr><td colspan="2"><br><h2><a name = "HeaderLink3"></a><a name = "HeaderLink3"></a>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a04909.html#80aca66f10d7fcb78d09f20cdf4490bc">void</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02837.html#a2b4ea6cb055783bf929a8c3d045b6a4">alloc</a> (<a class="el" href="a04655.html#57a2244776e01ad620c556de58eb7880">S32</a> <a class="el" href="a04414.html#f79a2a545a44cdc354141cbc37332824">size</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return a pointer to a chunk of memory from a pre-allocated block.  <a href="#a2b4ea6cb055783bf929a8c3d045b6a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a04909.html#80aca66f10d7fcb78d09f20cdf4490bc">void</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02837.html#bfd50a031e61d52e3977f1d2df308dea">freeBlocks</a> (<a class="el" href="a04954.html">bool</a> keepOne=false)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free all allocated memory blocks.  <a href="#bfd50a031e61d52e3977f1d2df308dea"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02837.html#fd20e1ef0ccc6b0727fd5a3f2f4e56f8">DataChunker</a> (<a class="el" href="a04655.html#57a2244776e01ad620c556de58eb7880">S32</a> <a class="el" href="a04414.html#f79a2a545a44cdc354141cbc37332824">size</a>=ChunkSize)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize using blocks of a given size.  <a href="#fd20e1ef0ccc6b0727fd5a3f2f4e56f8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02837.html#be967e0513f83e1f5779590718d12293">~DataChunker</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a04909.html#80aca66f10d7fcb78d09f20cdf4490bc">void</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02837.html#1278ca7f4f2be89abf94c371aa706612">swap</a> (<a class="el" href="a02837.html">DataChunker</a> &amp;d)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Swaps the memory allocated in one data chunker for another.  <a href="#1278ca7f4f2be89abf94c371aa706612"></a><br></td></tr>
<tr><td colspan="2"><br><h2><a name = "HeaderLink4"></a><a name = "HeaderLink4"></a>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a02838.html">DataBlock</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02837.html#93dcfa2653fef3dbbc3ba1c1ae8a46a9">mCurBlock</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">current page we're allocating data from.  <a href="#93dcfa2653fef3dbbc3ba1c1ae8a46a9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a04655.html#57a2244776e01ad620c556de58eb7880">S32</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02837.html#8575b4b1460b1272f3a9d7bdcb1d9bce">mChunkSize</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The size allocated for each page in the <a class="el" href="a02837.html">DataChunker</a>.  <a href="#8575b4b1460b1272f3a9d7bdcb1d9bce"></a><br></td></tr>
<tr><td colspan="2"><br><h2><a name = "HeaderLink5"></a><a name = "HeaderLink5"></a>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02838.html">DataBlock</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Block of allocated memory.  <a href="a02838.html#_details">More...</a><br></td></tr>
</table>
<hr><h2><a name = "HeaderLink6"></a><a name = "HeaderLink6"></a>Member Enumeration Documentation</h2>
<a class="anchor" name="b91c82c9e291d5d2316773f678890b9d"></a><!-- doxytag: member="DataChunker::@21" ref="b91c82c9e291d5d2316773f678890b9d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="b91c82c9e291d5d2316773f678890b9d536630bb06ed00f89cfb97eadca9c7c4"></a><!-- doxytag: member="ChunkSize" ref="b91c82c9e291d5d2316773f678890b9d536630bb06ed00f89cfb97eadca9c7c4" args="" -->ChunkSize</em>&nbsp;</td><td>
Default size of each <a class="el" href="a02838.html">DataBlock</a> page in the <a class="el" href="a02837.html">DataChunker</a>. </td></tr>
</table>
</dl>

</div>
</div><p>
<hr><h2><a name = "HeaderLink7"></a><a name = "HeaderLink7"></a>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="fd20e1ef0ccc6b0727fd5a3f2f4e56f8"></a><!-- doxytag: member="DataChunker::DataChunker" ref="fd20e1ef0ccc6b0727fd5a3f2f4e56f8" args="(S32 size=ChunkSize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataChunker::DataChunker           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a04655.html#57a2244776e01ad620c556de58eb7880">S32</a>&nbsp;</td>
          <td class="paramname"> <em>size</em> = <code>ChunkSize</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize using blocks of a given size. 
<p>
One new block is allocated at constructor-time.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>Size in bytes of the space to allocate for each block. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="be967e0513f83e1f5779590718d12293"></a><!-- doxytag: member="DataChunker::~DataChunker" ref="be967e0513f83e1f5779590718d12293" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataChunker::~DataChunker           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2><a name = "HeaderLink8"></a><a name = "HeaderLink8"></a>Member Function Documentation</h2>
<a class="anchor" name="a2b4ea6cb055783bf929a8c3d045b6a4"></a><!-- doxytag: member="DataChunker::alloc" ref="a2b4ea6cb055783bf929a8c3d045b6a4" args="(S32 size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a04909.html#80aca66f10d7fcb78d09f20cdf4490bc">void</a>* DataChunker::alloc           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a04655.html#57a2244776e01ad620c556de58eb7880">S32</a>&nbsp;</td>
          <td class="paramname"> <em>size</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return a pointer to a chunk of memory from a pre-allocated block. 
<p>
This memory goes away when you call freeBlocks.<p>
This memory is word-aligned. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>Size of chunk to return. This must be less than chunkSize or else an assertion will occur. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="bfd50a031e61d52e3977f1d2df308dea"></a><!-- doxytag: member="DataChunker::freeBlocks" ref="bfd50a031e61d52e3977f1d2df308dea" args="(bool keepOne=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a04909.html#80aca66f10d7fcb78d09f20cdf4490bc">void</a> DataChunker::freeBlocks           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a04954.html">bool</a>&nbsp;</td>
          <td class="paramname"> <em>keepOne</em> = <code>false</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Free all allocated memory blocks. 
<p>
This invalidates all pointers returned from <a class="el" href="a02837.html#a2b4ea6cb055783bf929a8c3d045b6a4">alloc()</a>. 
</div>
</div><p>
<a class="anchor" name="1278ca7f4f2be89abf94c371aa706612"></a><!-- doxytag: member="DataChunker::swap" ref="1278ca7f4f2be89abf94c371aa706612" args="(DataChunker &amp;d)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a04909.html#80aca66f10d7fcb78d09f20cdf4490bc">void</a> DataChunker::swap           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02837.html">DataChunker</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>d</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Swaps the memory allocated in one data chunker for another. 
<p>
This can be used to implement packing of memory stored in a <a class="el" href="a02837.html">DataChunker</a>. 
</div>
</div><p>
<hr><h2><a name = "HeaderLink9"></a><a name = "HeaderLink9"></a>Member Data Documentation</h2>
<a class="anchor" name="93dcfa2653fef3dbbc3ba1c1ae8a46a9"></a><!-- doxytag: member="DataChunker::mCurBlock" ref="93dcfa2653fef3dbbc3ba1c1ae8a46a9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a02838.html">DataBlock</a>* <a class="el" href="a02837.html#93dcfa2653fef3dbbc3ba1c1ae8a46a9">DataChunker::mCurBlock</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
current page we're allocating data from. 
<p>
If the data size request is greater than the memory space currently available in the current page, a new page will be allocated. 
</div>
</div><p>
<a class="anchor" name="8575b4b1460b1272f3a9d7bdcb1d9bce"></a><!-- doxytag: member="DataChunker::mChunkSize" ref="8575b4b1460b1272f3a9d7bdcb1d9bce" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a04655.html#57a2244776e01ad620c556de58eb7880">S32</a> <a class="el" href="a02837.html#8575b4b1460b1272f3a9d7bdcb1d9bce">DataChunker::mChunkSize</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The size allocated for each page in the <a class="el" href="a02837.html">DataChunker</a>. 
<p>

</div>
</div><p>
  </td>
</tr>
</table>

</div>
<div class="footer">   <span class="copy">&copy; <a href="http://www.garagegames.com/">GarageGames.com</a></span>   <a href="../../content_welcome.html" target="">Home</a>   <a href="#">Back to Top</a></div><div class="footer">   <span class="copy">&copy; <a href="http://www.garagegames.com/">GarageGames.com</a></span>   <a href="../../content_welcome.html" target="">Home</a>   <a href="#">Back to Top</a></div></body>

<!-- Mirrored from docs.garagegames.com/tgea/official/content/documentation/Engine Reference/a02837.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Dec 2017 21:39:54 GMT -->
</html>
