<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<!-- Mirrored from docs.garagegames.com/tgea/official/content/documentation/Engine Reference/a03443.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Dec 2017 21:45:53 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<HEAD><SCRIPT SRC="../../include/tutorial.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/prototype.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/scriptaculous.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/glossaryLookUp.html" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/referenceLookUp.html" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/component.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/componentContainer.html" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT>DocImagePath = "../../index.html";</SCRIPT><link href="../../include/tutorialStyles.css" rel="stylesheet" type="text/css" />
<link href="../../include/tutorial.css" rel="stylesheet" type="text/css" />
<link href="../../include/globalMainPageStyles.css" rel="stylesheet" type="text/css" />
<link href="../../include/referenceThemeStyle.html" rel="stylesheet" type="text/css" />
<link href="../../include/docTheme/theme.css" rel="stylesheet" type="text/css" />
<script>
   // this script chunk is to update the ToC to the current doc and expand it
   pageID = 2356;
   parent.leftFrame.expandToItem('tree2', 'doc2356');
   var element = parent.leftFrame.document.getElementById('doc2356');
   if((element) && (element.className==parent.leftFrame.nodeClosedClass))
{
   element.className = parent.leftFrame.nodeOpenClass
}
;
</script><SCRIPT SRC="../../include/tutorial.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/prototype.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/scriptaculous.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/glossaryLookUp.html" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/referenceLookUp.html" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/component.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/componentContainer.html" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT>DocImagePath = "../../index.html";</SCRIPT><link href="../../include/tutorialStyles.css" rel="stylesheet" type="text/css" />
<link href="../../include/tutorial.css" rel="stylesheet" type="text/css" />
<link href="../../include/globalMainPageStyles.css" rel="stylesheet" type="text/css" />
<link href="../../include/referenceThemeStyle.html" rel="stylesheet" type="text/css" />
<link href="../../include/docTheme/theme.css" rel="stylesheet" type="text/css" />
<script>
   // this script chunk is to update the ToC to the current doc and expand it
   pageID = 2356;
   parent.leftFrame.expandToItem('tree2', 'doc2356');
   var element = parent.leftFrame.document.getElementById('doc2356');
   if((element) && (element.className==parent.leftFrame.nodeClosedClass))
{
   element.className = parent.leftFrame.nodeOpenClass
}
;
</script><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>TGEA: Message Class Reference</title>
<link href="torque.css" rel="stylesheet" type="text/css">
</head>
<BODY id = "BODYID" onLoad = "initComponent()"  id = "BODYID" onLoad = "initComponent()"  bgcolor="#ffffff" text="#000000" link="#333399" alink="#9999ff" vlink="#000066">
<div align="center">

<table width=700 cellspacing=0 cellpadding=10 border=0 bgcolor="#ffffff" summary="">
<tr><td>


<!-- Generated by Doxygen 1.4.7 -->
<h1><br><small><a class="el" href="a04953.html"></a></small><a name = "HeaderLink0"></a><a name = "HeaderLink0"></a>Message Class Reference  [Message System]</h1><!-- doxytag: class="Message" --><!-- doxytag: inherits="SimObject" --><code>#include &lt;message.h&gt;</code>
<p>
Inheritance diagram for Message:<p><center><img src="a05892.png" border="0" usemap="#a05893" alt="Inheritance graph"></center>
<map name="a05893">
<area href="a03881.html" shape="rect" coords="19,155,101,181" alt="">
<area href="a02818.html" shape="rect" coords="7,80,113,107" alt="">
<area href="a03865.html" shape="rect" coords="5,5,115,32" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="a01486.html">List of all members.</a><hr><a name="_details"></a><h2><a name = "HeaderLink1"></a><a name = "HeaderLink1"></a>Detailed Description</h2>
Base class for messages. 
<p>
<a class="el" href="a03443.html">Message</a> is the base class for C++ defined messages, and may also be used in script for script defined messages if no C++ subclass is appropriate.<p>
Messages are reference counted and will be automatically deleted when their reference count reaches zero. When you dispatch a message, a reference will be added before the dispatch and freed after the dispatch. This allows for temporary messages with no additional code. If you want to keep the message around, for example to dispatch it to multiple queues, call <a class="el" href="a03443.html#e25d56635dbafa5ae3c4b6039601ecc7">addReference()</a> before dispatching it and <a class="el" href="a03443.html#7f2e39017c38426a91ce1a8f7431d2cf">freeReference()</a> when you are done with it. Never delete a <a class="el" href="a03443.html">Message</a> object directly unless <a class="el" href="a03443.html#e25d56635dbafa5ae3c4b6039601ecc7">addReference()</a> has not been called or the message has not been dispatched.<p>
<a class="el" href="a03443.html">Message</a> IDs are pooled similarly to datablocks, with the exception that IDs are reused. If you keep a message for longer than a single dispatch, then you should ensure that you clear any script variables that refer to it after the last <a class="el" href="a03443.html#7f2e39017c38426a91ce1a8f7431d2cf">freeReference()</a>. If you don't, then it is probable that the object ID will become valid again in the future and could cause hard to track down bugs.<p>
Messages have a unique type to simplify message handling code. For object messages, the type is defined as either the script defined class name or the C++ class name if no script class was defined. The message type may be obtained through the <a class="el" href="a03443.html#f5e39d0d232afc62f4153ae01c8d8716">getType()</a> method.<p>
By convention, any data for the message is held in script accessible fields. Messages that need to be handled in C++ as well as script provide the relevant data through persistent fields in a subclass of <a class="el" href="a03443.html">Message</a> to provide best performance on the C++ side. Script defined messages usually their through dynamic fields, and may be accessed in C++ using the <a class="el" href="a03881.html#e03e3d8ed575560c6e507ebdb829fae9">SimObject::getDataField()</a> method. 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2><a name = "HeaderLink2"></a><a name = "HeaderLink2"></a>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a03443.html#4fc4f717b634e66070366cb7722d7761">Message</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a03443.html#5936205c8c49222962de17ef61299ae9">DECLARE_CONOBJECT</a> (<a class="el" href="a03443.html">Message</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="a04954.html">bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a03443.html#0fbcea2a3a261e0e7f759974ed3859b3">onAdd</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called when the object is added to the sim.  <a href="#0fbcea2a3a261e0e7f759974ed3859b3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="a04909.html#80aca66f10d7fcb78d09f20cdf4490bc">void</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a03443.html#2477edd73784212a7925a7c97eae3874">onRemove</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called when the object is removed from the sim.  <a href="#2477edd73784212a7925a7c97eae3874"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a03443.html#f5e39d0d232afc62f4153ae01c8d8716">getType</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the type of the message.  <a href="#f5e39d0d232afc62f4153ae01c8d8716"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a04909.html#80aca66f10d7fcb78d09f20cdf4490bc">void</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a03443.html#e25d56635dbafa5ae3c4b6039601ecc7">addReference</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a reference to the reference count of this message.  <a href="#e25d56635dbafa5ae3c4b6039601ecc7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a04909.html#80aca66f10d7fcb78d09f20cdf4490bc">void</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a03443.html#7f2e39017c38426a91ce1a8f7431d2cf">freeReference</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free a reference to this message.  <a href="#7f2e39017c38426a91ce1a8f7431d2cf"></a><br></td></tr>
<tr><td colspan="2"><br><h2><a name = "HeaderLink3"></a><a name = "HeaderLink3"></a>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="a04236.html#49bacc02fe88c44cd96633dd77e34ebc">SimObjectId</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a03443.html#f1ef18a9aa8850ef515c41198e0cf9da">getNextMessageID</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Obtain next available <a class="el" href="a04236.html#49bacc02fe88c44cd96633dd77e34ebc">SimObjectId</a> for messages.  <a href="#f1ef18a9aa8850ef515c41198e0cf9da"></a><br></td></tr>
<tr><td colspan="2"><br><h2><a name = "HeaderLink4"></a><a name = "HeaderLink4"></a>Private Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="a03881.html">SimObject</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a03443.html#07f05b3efa6ce791b428ea14cf81d3fa">Parent</a></td></tr>

<tr><td colspan="2"><br><h2><a name = "HeaderLink5"></a><a name = "HeaderLink5"></a>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a04655.html#57a2244776e01ad620c556de58eb7880">S32</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a03443.html#529f7fefd545d43d003f0b79823da50a">mRefCount</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Current reference count.  <a href="#529f7fefd545d43d003f0b79823da50a"></a><br></td></tr>
</table>
<hr><h2><a name = "HeaderLink6"></a><a name = "HeaderLink6"></a>Member Typedef Documentation</h2>
<a class="anchor" name="07f05b3efa6ce791b428ea14cf81d3fa"></a><!-- doxytag: member="Message::Parent" ref="07f05b3efa6ce791b428ea14cf81d3fa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="a03881.html">SimObject</a> <a class="el" href="a03881.html">Message::Parent</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Reimplemented from <a class="el" href="a03881.html#cbd1487bf21765527510faefca6ea789">SimObject</a>.
</div>
</div><p>
<hr><h2><a name = "HeaderLink7"></a><a name = "HeaderLink7"></a>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="4fc4f717b634e66070366cb7722d7761"></a><!-- doxytag: member="Message::Message" ref="4fc4f717b634e66070366cb7722d7761" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Message::Message           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2><a name = "HeaderLink8"></a><a name = "HeaderLink8"></a>Member Function Documentation</h2>
<a class="anchor" name="5936205c8c49222962de17ef61299ae9"></a><!-- doxytag: member="Message::DECLARE_CONOBJECT" ref="5936205c8c49222962de17ef61299ae9" args="(Message)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Message::DECLARE_CONOBJECT           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a03443.html">Message</a>&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="f1ef18a9aa8850ef515c41198e0cf9da"></a><!-- doxytag: member="Message::getNextMessageID" ref="f1ef18a9aa8850ef515c41198e0cf9da" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="a04236.html#49bacc02fe88c44cd96633dd77e34ebc">SimObjectId</a> Message::getNextMessageID           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Obtain next available <a class="el" href="a04236.html#49bacc02fe88c44cd96633dd77e34ebc">SimObjectId</a> for messages. 
<p>
This is used in combination with the newmsg script operator to provide ID pooling for messages and works similarly to datablock IDs.<p>
By default, the 64 IDs following the datablock IDs are used for messages. As message objects generally have a short life time this prevents them from eating object IDs as if they haven't eaten for a year.<p>
Note that unlike SimObjects and datablocks, Messages IDs are re-used. If you store a message object in script and do not clear the variable containing the object ID after freeing the message, it is probable that the object ID will become valid again.<p>
<dl compact><dt><b>Returns:</b></dt><dd>Next available SimObjectId </dd></dl>

</div>
</div><p>
<a class="anchor" name="0fbcea2a3a261e0e7f759974ed3859b3"></a><!-- doxytag: member="Message::onAdd" ref="0fbcea2a3a261e0e7f759974ed3859b3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="a04954.html">bool</a> Message::onAdd           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called when the object is added to the sim. 
<p>

<p>
Reimplemented from <a class="el" href="a03881.html#e748b0ca5d7c02d994adde12d51d851b">SimObject</a>.
</div>
</div><p>
<a class="anchor" name="2477edd73784212a7925a7c97eae3874"></a><!-- doxytag: member="Message::onRemove" ref="2477edd73784212a7925a7c97eae3874" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="a04909.html#80aca66f10d7fcb78d09f20cdf4490bc">void</a> Message::onRemove           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called when the object is removed from the sim. 
<p>

<p>
Reimplemented from <a class="el" href="a03881.html#ef05a0e377d3e9244f53124b665d5ac5">SimObject</a>.
</div>
</div><p>
<a class="anchor" name="f5e39d0d232afc62f4153ae01c8d8716"></a><!-- doxytag: member="Message::getType" ref="f5e39d0d232afc62f4153ae01c8d8716" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* Message::getType           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the type of the message. 
<p>
The message type is either the script class name or the C++ class name if it has not been overridden in script. This allows easy identification of message types with minimum effort.<p>
<dl compact><dt><b>Returns:</b></dt><dd>Type of message </dd></dl>

</div>
</div><p>
<a class="anchor" name="e25d56635dbafa5ae3c4b6039601ecc7"></a><!-- doxytag: member="Message::addReference" ref="e25d56635dbafa5ae3c4b6039601ecc7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a04909.html#80aca66f10d7fcb78d09f20cdf4490bc">void</a> Message::addReference           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add a reference to the reference count of this message. 
<p>
Use <a class="el" href="a03443.html#7f2e39017c38426a91ce1a8f7431d2cf">freeReference()</a> to free the reference when you are done with it.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="a03443.html#7f2e39017c38426a91ce1a8f7431d2cf">freeReference()</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="7f2e39017c38426a91ce1a8f7431d2cf"></a><!-- doxytag: member="Message::freeReference" ref="7f2e39017c38426a91ce1a8f7431d2cf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a04909.html#80aca66f10d7fcb78d09f20cdf4490bc">void</a> Message::freeReference           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Free a reference to this message. 
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="a03443.html#e25d56635dbafa5ae3c4b6039601ecc7">addReference()</a> </dd></dl>

</div>
</div><p>
<hr><h2><a name = "HeaderLink9"></a><a name = "HeaderLink9"></a>Member Data Documentation</h2>
<a class="anchor" name="529f7fefd545d43d003f0b79823da50a"></a><!-- doxytag: member="Message::mRefCount" ref="529f7fefd545d43d003f0b79823da50a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a04655.html#57a2244776e01ad620c556de58eb7880">S32</a> <a class="el" href="a03443.html#529f7fefd545d43d003f0b79823da50a">Message::mRefCount</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Current reference count. 
<p>

</div>
</div><p>
  </td>
</tr>
</table>

</div>
<div class="footer">   <span class="copy">&copy; <a href="http://www.garagegames.com/">GarageGames.com</a></span>   <a href="../../content_welcome.html" target="">Home</a>   <a href="#">Back to Top</a></div><div class="footer">   <span class="copy">&copy; <a href="http://www.garagegames.com/">GarageGames.com</a></span>   <a href="../../content_welcome.html" target="">Home</a>   <a href="#">Back to Top</a></div></body>

<!-- Mirrored from docs.garagegames.com/tgea/official/content/documentation/Engine Reference/a03443.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Dec 2017 21:45:53 GMT -->
</html>
