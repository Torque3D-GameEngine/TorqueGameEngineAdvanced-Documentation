<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<!-- Mirrored from docs.garagegames.com/tgea/official/content/documentation/Engine Overview/GameProcess.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Dec 2017 21:36:11 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<HEAD><SCRIPT SRC="../../include/tutorial.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/prototype.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/scriptaculous.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/glossaryLookUp.html" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/referenceLookUp.html" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/component.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../include/componentContainer.html" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT>DocImagePath = "../../index.html";</SCRIPT><link href="../../include/tutorialStyles.css" rel="stylesheet" type="text/css" />
<link href="../../include/tutorial.css" rel="stylesheet" type="text/css" />
<link href="../../include/globalMainPageStyles.css" rel="stylesheet" type="text/css" />
<link href="../../include/referenceThemeStyle.html" rel="stylesheet" type="text/css" />
<link href="../../include/docTheme/theme.css" rel="stylesheet" type="text/css" />
<script>
   // this script chunk is to update the ToC to the current doc and expand it
   pageID = 6;
   parent.leftFrame.expandToItem('tree2', 'doc6');
   var element = parent.leftFrame.document.getElementById('doc6');
   if((element) && (element.className==parent.leftFrame.nodeClosedClass))
{
   element.className = parent.leftFrame.nodeOpenClass
}
;
</script><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Time Processing</title>
<link href="torque.css" rel="stylesheet" type="text/css">
</head>
<BODY id = "BODYID" onLoad = "initComponent()"  bgcolor="#ffffff" text="#000000" link="#333399" alink="#9999ff" vlink="#000066">
<div align="center">

<table width=700 cellspacing=0 cellpadding=10 border=0 bgcolor="#ffffff" summary="">
<tr><td>


<!-- Generated by Doxygen 1.5.4 -->
<h1><a class="anchor" name="TimeProcess"></a><a name = "HeaderLink0"></a><a name = "HeaderLink0"></a><a name = "HeaderLink0"></a>Time Processing </h1>
<h3><a class="anchor" name="TimeProcessIntroduction"></a><a name = "HeaderLink1"></a><a name = "HeaderLink1"></a><a name = "HeaderLink1"></a>Introduction</h3>
<p>The game world processing of objects is handled almost entirely in the game portion of the engine. All game world object classes are derived from <a class="el" href="../Engine%20Reference/a00336.html" title="Base class for game objects which use datablocks, networking, are editable, and need...">GameBase</a>, which is a subclass of <a class="el" href="../Engine%20Reference/a00920.html" title="A 3D object.">SceneObject</a>. GameBase objects that wish to be notified of the passage of time can be added to one of the two process lists - the global server or global client process list, depending on whether the object is a server object or a client ghost.</p>
<p>All objects in the process list are "ticked" once every 32 milliseconds. The ordering of the objects is determined by the GameBase::processAfter method, which is called if an object must be processed at some time after another object (not necessarily immediately afterward). For example, a player mounted to a vehicle would be set to processAfter the vehicle, so that after the vehicle moved the player's position could be updated to the correct position on the vehicles new position.
<h3><a class="anchor" name="SimOverDetails"></p></a><a name = "HeaderLink2"></a><a name = "HeaderLink2"></a><a name = "HeaderLink2"></a>Update Interfaces</h3>
<p>Game objects are updated in three separate functions, overridden from GameBase: GameBase::processTick(), which takes a single <a class="el" href="../Engine%20Reference/a00709.html">Move</a> structure as an argument (it may be NULL) and advances the object in time by one 32 ms tick, GameBase::interpolateTick(), which interpolates a client object backwards from the end of its current tick to the present time, and GameBase::advanceTime(), which allows a client object to advance animations and effects by the full duration of the time event.</p>
<p>Server side objects are only simulated on even tick boundaries, but client objects, in order to present a smooth view when the frame rate is high, are simulated after each time event. GameBase::processTick is still only invoked on even tick boundaries, but at the end of the time advance, objects are essentially rewound by the time difference to the end of the tick. Also, client objects that need to animate only by the total elapsed time can do so in the GameBase::advanceTime function, which is only called once per time advancement.</p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>If the control object is sent new object state from the server, it will be advanced by every Move the client has recorded that the server has not yet acknowledged - this is because the server has old data as far as the client is concerned, so the client skips forward through all the new data it knows about.</dd>
</dl>

<h3><a class="anchor" name="TimeProcessEvents"></a><a name = "HeaderLink3"></a><a name = "HeaderLink3"></a><a name = "HeaderLink3"></a>Processing Events</h3>
<p>During the processing of an object, situations may arise that are important to the Gameplay Implementation layer, and therefore need to be somehow communicated to this layer for further processing. Since a majority of the time our Gameplay Implementation occurs in TorqueScript, Torque provides a mechanism for notifying this layer of the event called a <b>Callback</b>.</p>
<p>When a callback is triggered, execution within the Game Processing loop pauses, and control of execution is handed over to the Console, which in turn searches the loaded TorqueScript code for an appropriate <b>Callback Handler</b>--a TorqueScript only block of code to be executed when the event occurs.</p>
<p>Common callback handlers may include playing a sound when an object is picked up (collided with), incrementing a score when a player dies, or allowing the Gameplay layer to know when other important events have occured.</p>
<p>Callbacks are very powerful, and a large majority of our Gameplay Implementation is simply writing callback handlers for the hundreds of events that can occur during processing, but it is important to keep in mind that execution of the engine is effectively paused while a callback is handled! Attempting to perform complex calculations such as a script based A* path find with 100,000 nodes is not recommended during Game Process level callbacks.</p>
<p>Callbacks may also be ignored by the Gameplay Implementation layer, and if no handler is provided for a specific callback, the event will be ignored and processing will continue.</p>
<p>Callbacks can and do occur elsewhere in the engine besides the Game Processing layer--examples include things like a new client entering the game (GameConnection::onClientEnterGame()), a new object registered with the simulation (SimObject::onAdd()), and many more.</p>
</tr>
</table>

</div>
<div class="footer">   <span class="copy">&copy; <a href="http://www.garagegames.com/">GarageGames.com</a></span>   <a href="../../content_welcome.html" target="">Home</a>   <a href="#">Back to Top</a></div></body>

<!-- Mirrored from docs.garagegames.com/tgea/official/content/documentation/Engine Overview/GameProcess.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Dec 2017 21:36:11 GMT -->
</html>